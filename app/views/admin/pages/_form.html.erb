<% editable = true if editable.nil? %>
<article class="module width_full">
  <%= form_for(@page, :url => admin_page_path(@page), :method => :put) do |f| %>
	  <header><h3><%= form_title(f.object) %></h3></header>
		  <div class="module_content">
        <fieldset>
          <%= f.label :key %>
          <%= f.object.key.titleize %>
        </fieldset>
		    <fieldset>
          <%= f.label :locale %>
          <%= f.object.locale %>
        </fieldset>
				<% unless f.object.page_contents.empty? %>
          <% eligible_contents = ManageableContent::Manager.eligible_contents(@page.key) %>
          <%= f.fields_for :page_contents do |content| %>
            <% if eligible_contents.include?(content.object.key.to_sym) %>
              <%= editable ? content.hidden_field(:id) : '' %>
  		        <%= content_form_tag content, :content, editable, :label => I18n.t("admin.content.#{content.object.key}") %>
            <% end %>
          <% end %>
        <% end %>
        <div class="clear"></div>
		  </div>
		  <%= render 'form_footer', :f => f, :editable => editable %>
  <% end %>
</article>

